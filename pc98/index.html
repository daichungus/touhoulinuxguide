<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="google-site-verification" content="ltcI_na3llrkU_tFgNzedPJ6SttT3XiO4kXdM3j46bY">
    <link rel="canonical" href="https://daichungus.github.io/touhoulinuxguide/pc98">
    <link rel="sitemap" type="application/xml" title="Sitemap" href="../sitemap.xml">
    <link href="../css/style.css" rel="stylesheet" type="text/css" media="all">
    <link rel="icon" type="image/x-icon" size="any" href="../image/pc98alice.ico" >
    <link rel="apple-touch-icon" sizes="64x64" href="../image/pc98alice.ico">
    <title>PC-98 Touhou Linux Guide</title>
    <meta charset="UTF-8">
    <meta name="description"
        content="A no-nonsense guide to running the PC-98 era Touhou games on Linux using RetroArch and DOSBox-X.">
    <meta name="keywords"
        content="Touhou, PC-98, PC-98 Touhou, Touhou Linux, Neko Project II, np21, retroarch, anex86, dosbox-x, Touhou guide, PC-98 Touhou Linux, emulation">
    <meta name="author" content="Daichungus">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="PC-98 Touhou Linux Guide">
    <meta property="og:description"
        content="A practical guide to running the PC-98 Touhou games on Linux.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://daichungus.github.io/touhoulinuxguide/pc98">
</head>

<body class="classic">
    <header>
        <h1>PC-98 Touhou Linux Guide</h1>
        <h2>By <a href="https://daichungus.github.io">Daichungus</a></h2>
        <p>Submit issues, contribute, or complain <a href="https://github.com/daichungus/touhoulinuxguide"><u>through the repo</u></a>.</p>
        <p>This is the guide for the PC-98 era games. <a href="../">The Windows era Touhou guide is here</a>.</p>
    </header>
    <hr class="light">
    <h2 id="disclaimer">Disclaimer</h2>
    <p>This guide focuses on using <b>DOSBox-X and Neko Project II Kai</b> for a relatively straightforward and consistent experience.
        It does <i>not</i> cover every setup or edge case.
    </p>
    <p>The goal here is to get most users running their PC-98 Touhou games without too much headaches.</p>
    <p>If you're looking for more advanced or alternative methods, other resources may be better suited.</p>
    <hr class="light">
    <h1>Preparing your Linux environment</h1>
    <h2 id="choosing-distro">Choosing a distro</h2>
    <p><i><u><a href="#installing-required-software">Skip this section</a></u> if you already have chosen your distro.</i></p>
    <p>Most major <a href="https://wikipedia.org/wiki/Linux_distribution">distros</a> and
        <a href="https://en.wikipedia.org/wiki/Desktop_environment">desktop environments</a>
        should work well with this guide.</p>
    <p>My only recommendation is to choose a well-known, widely-supported, and stable distro, which includes but is not
        limited to the following:
    </p>
    <ul>
        <li><a href="https://linuxmint.com/">Linux Mint</a></li>
        <li><a href="https://ubuntu.com/desktop">Ubuntu</a></li>
        <li><a href="https://fedoraproject.org/">Fedora</a></li>
    </ul>
    <p>This guide has been personally tested with:</p>
    <ul>
        <li>Linux Mint (22.2)</li>
        <li>Fedora (43)</li>
        <li>Arch Linux (virtual machine)</li>
    </ul>
    <h2 id="installing-required-software">Installing required software</h2>
    <p>Before continuing, ensure you have the necessary graphics drivers and system firmware installed.</p>
    <p>Consult your distro's documentation or other online resources for a proper setup (e.g., RPM Fusion for Nvidia
        drivers on Fedora, multilib repo on Arch, etc.).
    </p>
    <ol>
        <li>Update your repository using your distro's included package manager.
            <p><b>Debian/Ubuntu/Linux Mint</b></p>
            <pre><code class="block">sudo apt update &amp;&amp; sudo apt upgrade</code></pre>
            <p><b>Fedora</b></p>
            <pre><code class="block">sudo dnf update</code></pre>
            <p><b>Arch</b></p>
            <pre><code class="block">sudo pacman -Syu</code></pre>
        </li>
        <li>
            <a href="https://flatpak.org/setup/">Install Flatpak</a> on your distribution.
            If you do not wish to use Flatpak or already have it, skip this step.
        </li>
    </ol>
    <hr class="light">
    <h1 id="emulator-list">Choosing an emulator</h1>
    <h3>Disclaimer</h3>
    <p>There exists several emulators of the PC-98 platform, many of which work very well on Windows or older hardware.</p>
    <p>However, they're more likely to have issues and inconsistent behavior when running on Linux through Wine<sup>*</sup>,
        especially on certain distributions and setups.</p>
    <p>Hence this guide will mainly cover setup of two Linux-native emulators in detail:</p>
    <h2><b>DOSBox-X</b> (<a href="#dosbox-x-setup">skip to setup</a>)</h2>
    <ul>
        <li><p>All-around decent choice for most users</p></li>
        <li><p>Cross-platform (Windows, Linux, MacOS, DOS)</p></li>
        <li><p>Great if you emulate other DOS systems</p></li>
        <li><p>Included in many distros' repos</p></li>
        <li><p>Can directly run the original game files</p></li>
    </ul>
    <h2>Neko Project II Kai (<a href="#np21kai-setup">skip to setup</a>)</h2>
    <ul>
        <li><p>Considered a better choice for serious runs or more accurate emulation</p></li>
        <li><p>Cross-platform as a RetroArch core</p></li>
        <li><p>Great if you already use RetroArch</p></li>
        <li><p>Can be built from source as <code>xnp21kai</code>, and has an AUR package</p></li>
        <li><p>Only supports <code>.hdi</code> and <code>.fdi</code> files</p></li>
    </ul>
    <h3 id="return-from-emulator"><b><i>A list of other PC-98 emulators can be found <a href="./emulators.html">here</a>.</i></b></h3>
    <hr class="light">
        <h1 id="dosbox-x-setup">DOSBox-X setup</h1>
    <h2>Installation</h2>
    <p>Install DOSBox-X through your package manager</p>
    <p><b>Flatpak</b>    </p>
    <p class="recommended"><i><b>Recommended option for most users</b></i><sup>*</sup></p>
    <pre><code class="block">flatpak install flathub com.dosbox_x.DOSBox-X</code></pre>
    <p><b>Debian/Ubuntu/Linux Mint</b></p>
    <pre><code class="block">sudo apt install dosbox-x</code></pre>
    <p><b>Fedora</b></p>
    <pre><code class="block">sudo dnf copr enable rob72/DOSBox-X</code></pre>
    <pre><code class="block">sudo dnf install dosbox-x</code></pre>
    <p><b>Arch</b></p>
    <pre><code class="block">git clone https://aur.archlinux.org/dosbox-x.git</code></pre>
    <pre><code class="block">cd dosbox-x &amp;&amp; less PKGBUILD</code></pre>
    <pre><code class="block">makepkg -si dosbox-x</code></pre>
    <p class="recommended">
        <sup>*</sup> The Flatpak version helps avoid most inconsistencies between distros
        and will always be the most up-to-date version,
        at the cost of taking up more storage and less file permissions by default.
    </p>
    <h2>Settings to adjust before playing</h2>
    <h3>Configuration file</h3>
    <p>DOSBox-X relies on a configuration file to apply the correct settings for various types of programs.</p>
    <p>By default, DOSBox-X uses its own config file located at:</p>
    <ul>
        <li><p><b>Non-Flatpak</b></p>
            <pre><code class="block">~/.config/dosbox-x/dosbox-x-(version).conf</code></pre>
        </li>
        <li><p><b>Flatpak</b></p>
            <pre><code class="block">~/.var/app/com.dosbox_x.DOSBox-X/config/dosbox-x/dosbox-x-(version).conf</code></pre>
        </li>
    </ul>
    <p>If the working directory contains a file named
        <code class="blocksmall">dosbox-x.conf</code>,
        the settings that it contains will override the respective ones in the default config file.
    </p>
    <p class="recommended"><i><b>As such, a ready-to-use config file is available for you to <a href="./dosbox-x.conf" download>download</a>;
        Simply save it to the same directory as your <code>.hdi</code> files.</b></i></p>
    <p>If you prefer writing your own config file or directly editing the main config file, continue to the next sections.</p>
    <p><b>Otherwise, <a href="#pc98-files">download a font</a> to the directory, then <a href="#dosbox-x-running">start running the games</a>.</b></p>
    <h3 id="working-directory">Working directory</h3>
    <p>The working directory is where DOSBox-X will run. By default, DOSBox-X will ask you to choose a directory in your system.<sup>*</sup></p>
    <p>If you intend on using DOSBox-X only to play the PC-98 Touhou games,
        set the directory with the <code>.hdi</code> files as the default working directory <b>in the default config file</b>
    </p>
    <pre><code class="block">[dosbox]
working directory option = default
working directory default = /your/path/to/pc98touhou/</code></pre>
    <p><sup>*</sup> If ran from the desktop. If it was ran in the terminal, DOSBox-X uses the current directory as the working directory.</p>
    <h3>Graphics</h3>
    <p>To always start in fullscreen, set:</p>
    <pre><code class="block">[sdl]
fullscreen = true
fullresolution = desktop</code></pre>
    <p>To ensure the graphics stay consistent, set:</p>
    <pre><code class="block">[sdl]
output = openglpp

[render]
aspect = true
aspect_ratio = -1:-1</code></pre>
    <h3>Enabling PC-98 mode</h3>
    <p>To always enable PC-98 mode, set</p>
    <pre><code class="block">[dosbox]
machine = pc98</code></pre>
    <h3>CPU speed</h3>
    <p>The default CPU cycle count (<code>3000</code>) is too low for the Touhou games, resulting in extremely slow gameplay.</p>
    <p>For a consistently smooth experience,<sup>*</sup> set</p>
    <pre><code class="block">[cpu]
cycles = 72000</code></pre>
    <p>If your hardware allows it,<sup>†</sup> set</p>
    <pre><code class="block">[cpu]
core = dynamic_x86</code></pre>
    <p><sup>*</sup> In testing, most values between <code>10000</code> and <code>100000</code> worked well for the Touhou games. <code>72000</code> is suggested in this guide for most systems.</p>
    <p><sup>†</sup> DOSBox-X used less of the CPU compared to "Normal" during testing with the same number of cycles.</p>
    <h3 id="autoexec">Auto-execution</h3>
    <p>This is especially helpful if you intend on always using only one <code>.hdi</code> file<sup>*</sup> and do not want to always type the commands by hand</p>
    <pre><code class="block">[autoexec]
IMGMOUNT C TOUHOU.HDI
BOOT C:</code></pre>
    <p>Substitute <code class="blocksmall">TOUHOU.HDI</code> with the actual name of your <code>.hdi</code> file.</p>
    <p><sup>*</sup> For example, an <code>.hdi</code> with all the PC-98 Touhou games or a full system</p>
    <hr class="light">
    <h1 id="np21kai-setup">Neko Project II Kai setup</h1>
    <h2>Installation</h2>
    <p>There are many different ways to have NP21kai installed to your system.</p>
    <ul>
        <li>
            <h3>RetroArch (<a href="#np21kai-retroarch">skipto</a>)</h3>
            <p class="recommended"><i><b>Recommended option for most users</b></i></p>
            <p>Good and stable choice if you already use RetroArch for other games, but not great if you're tight on storage.
                Modern UI navigation is biased towards controllers.
            </p>
        </li>
        <li><h3>AUR package (<a href="#np21kai-arch">skipto</a>)</h3>
            <p>Good choice if you use an Arch-based system. Doesn't help if you don't use Arch, by the way.</p>
        </li>
        <li><h3>Building from source / xnp21kai (<a href="#np21kai-source">skipto</a>)</h3>
            <p class="warning"><i><b>Has bugs and missing features.</b></i></p>
            <p>Not recommended for users new to Linux or unfamiliar with CLI.
                Only choose this if you absolutely desire or have no other options.
            </p>
        </li>
    </ul>
    <h3 id="np21kai-retroarch">RetroArch</h3>
    <p><i>Installation instructions are sourced <a href="https://www.retroarch.com/index.php?page=linux-instructions">from this page</a>.</i></p>
    <ol>
        <li>
            <p>Install RetroArch. Choose the version that suits you the most.</p>
            <ul>
                <li>
                    <p><b>Flatpak</b></p>
                    <pre><code class="block">flatpak install flathub org.libretro.RetroArch</code></pre>
                </li>
                <li><p><b><a href="https://store.steampowered.com/app/1118310/RetroArch/">Steam</a></b></p></li>
                <li><p><b><a href="https://retroarchofficial.itch.io/retroarch">Itch.io</a></b></p></li>
                <li>
                    <p><b>Ubuntu/Linux Mint <sup>*</sup></b></p>
                    <pre><code class="block">sudo add-apt-repository ppa:libretro/stable &amp;&amp; sudo apt-get update &amp;&amp; sudo apt-get install retroarch</code></pre>
                </li>
                <li>
                    <p><b>Arch <sup>*</sup></b></p>
                    <pre><code class="block">sudo pacman -Sy retroarch</code></pre>
                </li>
            </ul>
        </li>
        <li>Run RetroArch either by GUI or
            <pre><code class="block">flatpak run org.libretro.RetroArch</code></pre>
        </li>
        <li><p>In the Main Menu, select<sup>†</sup> "Load Core", then "Download Core"</p></li>
        <li>
            <p>Scroll down the list to <b>NEC - PC-98 (Neko Project II Kai)</b>, then select to install it.</p>
        </li>
        <li><p><a href="">Adjust settings before playing</a></p></li>
    </ol>
    <p><sup>*</sup> For consistency and ease of use, this guide recommends the stable version for most users.</p>
    <p><sup>†</sup> Enter key on a keyboard</p>
    <h3 id="np21kai-arch">Arch Linux</h3>
    <p>If you're new to Arch, please consider first reading the Arch Wiki article on
        <a href="https://wiki.archlinux.org/title/Arch_User_Repository">how to install packages from the AUR</a>,
        along with the <a href="https://wiki.archlinux.org/title/Makepkg">article on makepkg</a>.
    </p>
    <ol>
        <li>
            <p>Install gtk2 from the <a href="https://aur.archlinux.org/packages/gtk2">AUR</a></p>
            <pre><code class="block">git clone https://aur.archlinux.org/gtk2.git</code></pre>
            <pre><code class="block">cd gtk2 &amp;&amp; less PKGBUILD</code></pre>
            <pre><code class="block">makepkg -si gtk2</code></pre>
        </li>
        <li>
            <p>Install np21kai from the <a href="https://aur.archlinux.org/packages/np2kai-git">AUR</a></p>
            <pre><code class="block">git clone https://aur.archlinux.org/np2kai-git.git</code></pre>
            <pre><code class="block">cd np2kai-git &amp;&amp; less PKGBUILD</code></pre>
            <pre><code class="block">makepkg -si np21kai</code></pre>
        </li>
        <li><p>Proceed with <a href="#adjust-settings-xnp21kai">adjusting the necessary settings</a>.</p></li>
    </ol>
    <h3 id="np21kai-source">Building from source (xnp21kai)</h3>
    <p><i>The steps below are from the <a href="https://github.com/AZO234/NP2kai/blob/master/README.md">README document</a>.</i></p>
    <ol>
        <li>
            <p>Install the required programs and libraries</p>
            <p><b>Debian/Ubuntu/Linux Mint<sup class="warning">*</sup></b></p>
            <p><code class="block">sudo apt install git cmake ninja-build build-essential libx11-dev libglib2.0-dev libgtk2.0-dev libsdl2-dev
                libsdl2-mixer-dev libsdl2-ttf-dev libsdl1.2-dev libsdl-mixer1.2-dev libsdl-ttf2.0-dev libusb-1.0-0-dev libfreetype-dev
                libfontconfig1-dev libssl-dev
            </code></p>
            <p><b>Fedora <sup class="warning">†</sup></b></p>
            <p><code class="block">ssudo dnf group install "development-tools"</code></p>
            <p><code class="block">sudo dnf install gcc-c++ cmake /usr/lib64/libusb.so SDL-devel SDL_mixer-devel SDL_ttf-devel SDL2-devel SDL2_mixer-devel
                SDL2_ttf-devel gtk2-devel libX11-devel fontconfig-devel freetype-devel
            </code></p>
        </li>
        <li><p>Clone <a href="https://github.com/AZO234/NP2kai">the np21kai repo</a></p>
            <pre><code class="block">git clone https://github.com/AZO234/NP2kai.git</code></pre>
        </li>
        <li><p>Navigate to the repo and make the work directory</p>
            <pre><code class="block">cd NP2kai</code></pre>
            <pre><code class="block">mkdir build</code></pre>
            <pre><code class="block">cd build</code></pre>
        </li>
        <li><p>Generate the makefile</p>
            <pre><code class="block">cmake .. -D BUILD_X=ON</code></pre>
        </li>
        <li><p>Make. Errors are normal.</p>
            <pre><code class="block">make -j</code></pre>
        </li>
        <li><p>Install the binary (to <code>/usr/local/bin/</code>)</p>
            <pre><code class="block">sudo make install</code></pre>
        </li>
        <li>Run the program, and <a href="#adjust-settings-xnp21kai">adjust settings</a>
            <pre><code class="block">xnp21kai</code></pre>
        </li>
    </ol>
    <p class="warning">
        <sup>*</sup> Installing these libraries may cause some of your programs or dependencies to be automatically removed.
        Always check what packages will be installed and removed before confirmation.
    </p>
    <p class="warning">
        <sup>†</sup> Currently does not work on Fedora 43, as the makefile will return an Error 2, therefore the file project cannot be built.
    </p>
    <h2 id="adjust-settings">Settings to adjust before playing</h2>
    <h3 id="adjust-settings-retroarch">RetroArch</h3>
    <ol>
        <li>
            <p>Go back<sup>*</sup> to the previous menu and select the respective core. On the Main Menu, "Start Core" will be in place of "Load Core".</p>
        </li>
        <li><p>Start the core without content and press <code>F1</code> to open the Quick Menu</p></li>
        <li>
            <p>Select "Core Options", and apply these settings:</p>
            <ul>
                <li><b>CPU Clock Multiplier<sup class="warning">†</sup></b> = <code class="blocksmall">52</code></li>
                <li><b>RAM Size<sup class="warning">†</sup></b> = <code class="blocksmall">16</code></li>
                <li>Sound Board = <code class="blocksmall">PC9801-26K+86</code></li>
                <li>Volume VM = <code class="blocksmall">128</code></li>
                <li>Volume SSG = <code class="blocksmall">128</code></li>
                <li>Volume RHYTHM = <code class="blocksmall">128</code></li>
                <li>Sound Generator = <code class="blocksmall">Default</code></li>
            </ul>
        </li>
        <li><p>Go back and restart the core.</p></li>
        <li><p>You're now ready to <a href="#running-pc98-touhou">run the games</a></p></li>
    </ol>
    <p><sup>*</sup> Backspace key on keyboard</p>
    <p class="warning"><b><sup>†</sup> These settings are required for smooth gameplay.</b></p>
    <h3 id="adjust-settings-xnp21kai">xnp21kai</h3>
    <ol>
        <li><p>In the menu bar, adjust these settings for a smooth experience. <b>To apply them, hit "Reset" in "Emulator"</b></p>
            <ul>
                <li>
                    <b>Emulator</b>
                    <ul>
                        <li><b>CPU</b><sup>*</sup> = <code class="blocksmall">2.4576MHz x 52</code></li>
                        <li>Architecture = <code class="blocksmall">PC-9801VX</code></li>
                        <li>Sampling Rate = <code class="blocksmall">44100 kHz</code></li>
                        <li><b>Buffer</b><sup class="warning">†</sup> = <code class="blocksmall">20 ms</code></li>
                    </ul>
                </li>
                <li>
                    <b>Device</b>
                    <ul>
                        <li>Sound = PC9801-86</li>
                        <li>Memory = 16.6 MB</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><p>Install the <a href="#pc98-files">necessary ROM files</a> to <code class="blocksmall">~/.config/xnp21kai/</code></p></li>
    </ol>
    <p><sup>*</sup> The default multiplier of 20 should be enough for most systems, but can result in slowdowns on sections with large amount of enemies or danmaku.</p>
    <p class="warning"><sup>†</sup> Testing by the author has shown that a buffer of 100 ms or more will result in noticeable sound delay, especially for sound effects.</p>
    <hr class="light">
    <h1 id="pc98-files">PC-98 files</h1>
    <h2>ROM files</h2>
    <p>You may need to install some PC-98 ROM files for your emulator to work properly.</p>
    <p>NP2Kai on RetroArch and DOSBox-X both already include the necessary files.</p>
    <p>However, <b>xnp21kai does require these files</b>:</p>
    <ul>
        <li><a href="./ROM/BIOS.ROM" download>BIOS.ROM</a></li>
        <li><a href="./ROM/ITF.ROM" download>ITF.ROM</a></li>
        <li><a href="./ROM/SOUND.ROM" download>SOUND.ROM</a></li>
        <li><a href="./ROM/FONT.ROM" download>FONT.ROM</a> (see <a href="#fonts">next section</a>)</li>
    </ul>
    <h2 id="fonts">Fonts</h2>
    <p>Both Neko Project II Kai and DOSBox-X require the a font file.</p>
    <p>Some popular font files are available to download from here:</p>
    <ul>
        <li><a href="./fonts/FONTNP.BMP" download>Neko Project 21 font</a></li>
        <li><a href="./fonts/ANEX86.BMP" download>Anex86 font</a></li>
        <li><a href="./fonts/FREECG98.BMP" download>FREECG98 font (DOSBox-X default)</a></li>
        <li><a href="./ROM/FONT.ROM" download>Original PC-98 font</a></li>
    </ul>
    <p>Move/copy the font file to the same directory/folder as your PC-98 Touhou <code>.hdi</code> file(s).</p>
    <p>For xnp21kai, place it in <code class="blocksmall">~/.config/xnp21kai</code>. If you are using a font besides
        <code>FONT.ROM</code>, edit <code>fontfile</code> in <code>xnp21kairc</code> to the <i><b>abosolute</b></i> filepath of the font.
    </p>
    <hr class="light">
    <h1 id="running-pc98-touhou">Running the PC-98 Touhou games</h1>
    <h3>Disclaimer</h3>
    <p>This guide assumes that you have acquired your copies of the PC-98 Touhou games as <code>.hdi</code> or <code>.fdi</code> file(s)</p>
    <p>While the author has tested running the games from the original "loose" files
        (such as those in the <a href="https://upload.thbwiki.cc/6/6b/53%E5%9B%9E%E4%BA%8C%E8%BD%A9%E7%9B%AE_%E6%97%A7%E4%BD%9C5in1.jpg">compilation disc</a>),
        with DOSBox-X, most readers are unlikely to be in a similar situation.
    </p>
    <p>Therefore the following sections will not cover on how to run the games from the original files.</p>
    <p>Regardless, it is highly recommended that you store your <code>.hdi</code> files in a directory/folder named "Games" or "Touhou" for ease of rememberance.</p>
    <h1 id="dosbox-x-running">DOSBox-X</h1>
    <h2 id="dosbox-x-running-gui">GUI/Desktop</h2>
    <ol>
        <li>
            <p>If prompted, select the directory/folder with your <code>.hdi</code> files as your working directory.</p>
        </li>
        <li><p>Wait for it to finish loading, then run these two commands in DOSBox-X:</p>
            <pre><code class="block">IMGMOUNT C TOUHOU.HDI</code></pre>
            <pre><code class="block">BOOT C:</code></pre>
            Substitute <code class="blocksmall">TOUHOU.HDI</code> with the actual
            filename<sup class="warning">*</sup> of the <code>.hdi</code> file<sup>†</sup> you want to load.
        </li>
        <li><p>Enjoy!</p></li>
        <li><p><a href="#dosbox-tips">See next section</a> on how to remove or change the <code>.hdi</code> file</p></li>
    </ol>
    <p class="warning"><b><sup>*</sup> The filename is case-sensitive!</b></p>
    <p><sup>†</sup> Depending on the type of <code>.hdi</code> file you obtained, you'll either directly boot into the game or a menu with the games listed.</p>
    <h2>Command Line</h2>
    <ol>
        <li>
            <p>Navigate to the directory folder with your <code>.hdi</code>(s) and config file, then run</p>
            <ul>
                <li><p><b>Non-Flatpak: </b><code class="blocksmall">dosbox-x</code></p></li>
                <li><p><b>Flatpak: </b><code class="blocksmall">flatpak run com.dosbox_x.DOSBox-X</code></p></li>
            </ul>
        </li>
        <li>Follow the same remaining steps as <a href="#dosbox-x-running-gui">above</a></li>
    </ol>
    <h1>Neko Project II Kai</h1>
    <h2 id="np21kai-running-retroarch">RetroArch</h2>
    <ol>
        <li><p>In the Main Menu, select "Load Core", then "NEC - PC-98 (Neko Project II Kai)"</p></li>
        <li><p><b>If it's your first time loading the <code>.hdi</code> file:</b></p>
            <ol>
                <li><p>Select "Load Content"</p></li>
                <li><p>Navigate to to directory with the file and select it</p></li>
            </ol>
            <p><b>If you have loaded the <code>.hdi</code> file before:</b></p>
            <ol>
                <li><p>Select "Playlists", then "History"</p></li>
                <li><p>Select the <code>.hdi</code> file, then run it.</p></li>
            </ol>
        </li>
        <li><p>Enjoy!</p></li>
        <li><p>To remove the <code>.hdi</code> file, go into the Quick Menu and select "Close Content"</p></li>
    </ol>
    <h2 id="xnp21kai-running">xnp21kai</h2>
    <ol>
        <li><p>In the menu bar, select "HardDisk"</p></li>
        <li><p>Choose <code>IDE0-0</code><sup>*</sup>, then "Open"</p></li>
        <li><p>Find your Touhou <code>.hdi</code> file and open it.</p></li>
        <li><p>Reset the emulator.</p></li>
        <li><p>Enjoy!</p></li>
        <li><p>To remove<sup>†</sup> the <code>.hdi</code>, simply choose "Remove" on the "hard disk" the <code>.hdi</code> is located in and reset the emulator.</p></li>
    </ol>
    <p><sup>*</sup> <code>IDE0-0</code> acts like the <code>C:</code> drive, while <code>IDE0-1</code> is the <code>A:</code> drive.</p>
    <p><sup>†</sup> To switch to another <code>.hdi</code>, simply choose "Open" again.</p>
    <hr class="light">
    <h1 id="savestates">Using savestates</h1>
    <p class="warning"><i>Work in progress</i></p>
    <p>
        Savestates allow you to create a "snapshot" of your PC-98 system at any given time, so long as your <code>.hdi</code>
        file still exists in the same location as when you last used it, and there's enough open slots left.
    </p>
    <p>In the context of the PC-98 Touhou games, savestates are useful for applications such as continuing where you left off in-game.</p>
    <h2>DOSBox-X</h2>
    <h3>Manual methods</h3>
    <p>To create a savestate, navigate to "Capture", then click on "Save state" <b><code class="blocksmall">F12 + S</code></b></p>
    <p>You'll be prompted to give it a unique name.<sup class="warning">*</sup></p>
    <p>To load a savestate, repeat the first step but click on "Load state" <b><code class="blocksmall">F12 + L</code></b> instead.</p>
    <p>To store more than one savestate, navigate<sup>†</sup> to an empty slot in "Select save slot" under "Capture". DOSBox-X has 100 empty slots by default.</p>
    <p>
        To remove a slot's content without writing any data to it, click "Remove state in slot" under "Select save slot"
        <i class="warning">after you've already selected the slot that you want to clear.</i>
    </p>
    <p class="warning">
        <sup>*</sup> This will overwrite all data in the current selected save slot,
        so make sure to navigate to the next empty slot if you want to save a new separate save state.
    </p>
    <p>
        <sup>†</sup> For faster navigation, use <b><code class="blocksmall">F12 + .</code></b> for the next slot,
        and <b><code class="blocksmall">F12 + ,</code></b> for the previous slot; both are relative to the current selected save slot.
    </p>
    <h3>Auto-saving</h3>
    <h2>Neko Project II Kai</h2>
    <h3>RetroArch</h3>
    <h3>xnp21kai</h3>
    <p>To enable savestates, add the following line to <code>xnp21kairc</code></p>
    <pre><code class="blocksmall">STATSAVE = true</code></pre>
    <p>(Re)start the program. There should be a new section in the menu bar titled <code>STAT</code>. Under that, you can save and load two slots.</p>
    <h2>Other</h2>
    <hr class="light">
    <h1>Important and useful tips</h1>
    <h2 id="dosbox-tips">DOSBox-X</h2>
    <ul>
        <li><p class="warning">Restarting the DOSBox-X instance will make it unable to mount any <code>.hdi</code> file in your working directory.</p>
            <p>Instead:</p>
            <ul>
                <li><p>If you want to use the same <code>.hdi</code> file, Reboot the guest system (<b><code>F12+B</code></b>).</p></li>
                <li><p>If you want to use a different <code>.hdi</code> file in the same working directory, reset the virtual machine (<b><code>F12+R</code></b>).</p></li>
            </ul>
        </li>
        <li><p>If you only use one <code>.hdi</code> and only use DOSBox-X for that purpose, it's useful to make DOSBox-X automatically
            <a href="#autoexec">load it</a> every time <a href="#working-directory">you run DOSBox-X</a>.</p></li>
    </ul>
    <h2>Neko Project II Kai</h2>
    <h3>RetroArch</h3>
    <ul>
        <li><p class="warning">By default, pressing the Esc key twice will quit RetroArch!</p></li>
        <li>
            <p>It's recommended to set your <code>.hdi</code> file(s) as favorites to access them faster in the future.</p>
            <p>There are two ways of adding them to your favorites:</p>
            <ul>
                <li><p>Quick Menu → Add to Favorites (while running)</p></li>
                <li><p>Playlist → History → your <code>.hdi</code> file(s) → Add to Favorites</p></li>
            </ul>
        </li>
    </ul>
    <h3>xnp21kai</h3>
    <ul>
        <li><p>Your window position and size is not remembered!</p></li>
        <li><p>Your last used <code>.hdi</code> file, however, is remembered!</p></li>
        <li><p>When ran from the terminal, closing the terminal emulator will also close xnp21kai</p></li>
        <li><p>There has been issues where closing the window via the "X" button may not cause the program to stop running.</p>
            <p>If that happens, kill the program via the terminal or System Monitor.</p>
        </li>
    </ul>
    <h2>Other</h2>
    <ul>
        <li>
            <p>Make sure to run this command before using older emulators (Neko Project II, Anex86, T98-Next, etc.) with Wine:</p>
            <pre><code class="block">winetricks ddr=gdi</code></pre>
        </li>
    </ul>
    <hr class="light">
    <h1>Common Issues</h1>
    <p>This section is under expansion. Submit issues and fixes <a href="https://github.com/daichungus/touhoulinuxguide/issues">through the repo</a>.</p>
    <h2>xnp21kai</h2>
    <h3>No sound</h3>
    <p>Try stopping the program and run it again. (<code class="blocksmall">Ctrl+C</code> if launched from the terminal)</p>
    <h3>Can't close/freezes</h3>
    <p>Includes errors being thrown even when pressing <code class="blocksmall">Ctrl+C</code> in the terminal.
        Unfortunately, This is arbitrary behavior that there is no exact solution to so far.
    </p>
    <p>Testing by the author suggests that directly running <code>xnp21kai</code> from <code>/usr/local/bin/</code>
        may solve this issue if it repeatedly happens.
    </p>
    <h3>Fullscreen isn't fullscreen</h3>
    <p>Unfortunately there is currently no option to scale up the display.</p>
    <hr class="light">
    <h1>Additional Resources and References</h1>
    <ul>
        <li><a href="https://dosbox-x.com/wiki/Guide%3APC%E2%80%9098-emulation-in-DOSBox%E2%80%90X">DOSBox-X</a> | PC-98 setup</li>
        <li><a href="https://docs.libretro.com/library/neko_project_ii_kai/">RetroArch</a> | NP2 Kai page</li>
        <li><a href="https://maribelhearn.com/faq/pc98">Maribel Hearn</a> | PC-98 Guide</li>
        <li><a href="https://nc-roadgeek.neocities.org/mima/pc98-neko">Feeva</a> | Neko Project II guide for Touhou</li>
        <li><a href="https://gang-fight.com/projects/98faq/">Gang Fight</a> | PC-98 Emulation for Beginners</li>
        <li><a href="https://46okumen.com/pc-98-emulation/">46 Okumen</a> | PC-98 Emulation</li>
        <li><a href="https://gu4n.github.io/br2/instructions.html">Gu4n</a> | T98-Next setup instructions</li>
        <li><a href="https://www.zophar.net/pc98.html">Zophar's Domain</a> | PC-98 emulators for Windows</li>
        <li><a href="https://docs.libretro.com/library/neko_project_ii_kai/">Libretro</a> | NP2kai documentation</li>
        <li><a href="https://touhou-memories.com/post/190684950124/configure-anex86">Touhou Memories</a> | Anex86 configuration</li>
        <li><a href="https://pc98.ne.jp/reslib">PC-9800 Central Community</a> | Resource Library</li>
        <li><a href="https://daichungus.github.io/touhoulinuxguide">Windows Touhou on Linux Guide</a></li>
    </ul>
    <hr class="light">
    <h2>Special Thanks</h2>
    <p>The author would like to thank the following for their support:</p>
    <ul>
        <li>PC-98 Touhou Discord server</li>
    </ul>
    <hr class="light">
    <footer>
        <p id="last-updated"></p>
        <script src="../js/time.js"></script>
    </footer>
</body>

</html>